clc
clear all
close all

l1 = 0.1;
l2 = 0.2;
s = 0.1;
f = 0.3;
d = 0.05;
for a1 = s:d:f
    for a2 = s:s:s
        for a3 = 0.01:0.02:0.1
            for a4 = s:s:s
                a1
                a2
                l = [0.05,0.05,a3,0.05,...%1-4
                    0.05,0.05,a3,0.05,...%5-8
                    a1,a1,0.2,0.2,...%9-12
                    0.05,0.05,0.05,0.05,...%13-16
                    l1,l1,l2,l2,...%17-20
                    l2,0.05,0.05,l1,...%21-24
                    l2,0.05,0.05,l1,...%25-28
                    l1,l1,l1,l1,...%29-28
                    0.1,0.1,0.1,0.1];%29-32
                k1  = 10;
                k = [k1,k1,k1,k1,...%1-4
                    k1,k1,k1,k1,...%5-8
                    k1,k1,k1,k1,...%9-12
                    k1,k1,k1,k1,...%13-16
                    k1,k1,k1,k1,...%17-20
                    k1,k1,k1,k1,...%21-24
                    k1,k1,k1,k1,...%25-28
                    k1,k1,k1,k1,...%29-28
                    k1,k1,k1,k1];%29-32
                
                x0 = [0,0,0.6,0,0.2,0,...
                    0.2,0,0.6,0,0.2,0,...
                    0,0.1,-0.1,0.2,0,0,...
                    0,0.1,0.4,0.2,0,0,...
                    0,0.1,0.8,1,0,0,...
                    0.1,0,-0.1,0,0,1,...
                    0.1,0.2,-0.1,0,0,1];
                
                [p,x] = forward_kin(x0,l,k);
                
                hold on;
                xlim([-0.5 0.5])
                ylim([-0.5 0.5])
                zlim([-0.5 0.5])
                campos('manual')
                campos([-1,-1,1])
                xlabel("x")
                ylabel("y")
                zlabel("z")
                
                plot3(p(1),p(2),p(3),'r*')
                plot3([0,0],[0,0.2],[0,0]);
                plot3([0.2,0.2],[0,0.2],[0,0]);
                for i = 1:7
                    plot3([x((i-1)*6 + 1),x((i-1)*6 + 1) + x((i-1)*6 + 4)],...
                        [x((i-1)*6 + 2),x((i-1)*6 + 2) + x((i-1)*6 + 5)],...
                        [x((i-1)*6 + 3),x((i-1)*6 + 3) + x((i-1)*6 + 6)]);
                end
                drawnow
            end
        end
    end
end