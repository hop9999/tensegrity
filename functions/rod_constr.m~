function [c,ceq] = rod_constr(x,robot)
n = length(robot.d) - length(robot.base)/6;
n_plane_4 = length(robot.planes_4_x0)/12;
c = [];
ceq = zeros(1,n + n_plane_4*6);
for i = 1:n
    ceq(i) = (robot.d(i+length(robot.base)/6)^2 - (x((i-1)*6 + 1) - x((i-1)*6 + 4))^2-...
                                                  (x((i-1)*6 + 2) - x((i-1)*6 + 5))^2 -...
                                                  (x((i-1)*6 + 3) - x((i-1)*6 + 6))^2);
end
for i = 1:n_plane_4
    ceq(n+i) = (robot.planes_4_d((i-1)*6 + 1)^2 - (x((i-1)*12 + 1) - x((i-1)*12 + 4))^2-...
                                                  (x((i-1)*12 + 2) - x((i-1)*12 + 5))^2 -...
                                                  (x((i-1)*12 + 3) - x((i-1)*12 + 6))^2);
    
    ceq(n+i) = (robot.planes_4_d((i-1)*6 + 1)^2 - (x((i-1)*12 + 4) - x((i-1)*12 + 7))^2-...
                                                  (x((i-1)*12 + 5) - x((i-1)*12 + 8))^2 -...
                                                  (x((i-1)*12 + 6) - x((i-1)*12 + 9))^2);
    
    ceq(n+i) = (robot.planes_4_d((i-1)*6 + 1)^2 - (x((i-1)*12 + 7) - x((i-1)*12 + 10))^2-...
                                                  (x((i-1)*12 + 8) - x((i-1)*12 + 11))^2 -...
                                                  (x((i-1)*12 + 9) - x((i-1)*12 + 12))^2);
    
    ceq(n+i) = (robot.planes_4_d((i-1)*6 + 1)^2 - (x((i-1)*12 + 10) - x((i-1)*12 + 1))^2-...
                                                  (x((i-1)*12 + 11) - x((i-1)*12 + 2))^2 -...
                                                  (x((i-1)*12 + 12) - x((i-1)*12 + 3))^2);
    
    ceq(n+i) = (robot.planes_4_d((i-1)*6 + 1)^2 - (x((i-1)*12 + 1) - x((i-1)*12 + 7))^2-...
                                                  (x((i-1)*12 + 2) - x((i-1)*12 + 8))^2 -...
                                                  (x((i-1)*12 + 3) - x((i-1)*12 + 9))^2);
    
    ceq(n+i) = (robot.planes_4_d((i-1)*6 + 1)^2 - (x((i-1)*12 + 4) - x((i-1)*12 + 10))^2-...
                                                  (x((i-1)*12 + 5) - x((i-1)*12 + 11))^2 -...
                                                  (x((i-1)*12 + 6) - x((i-1)*12 + 12))^2);
end

end