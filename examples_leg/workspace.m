clc
clear all
close all

l1 = 0.1;
l2 = 0.2;
s = 0.05;
f = 0.4;
d = 0.05;
for a1 = 0.05:d:0.3
    for a2 = s:s:s
        for a3 = 0.05:d:0.2
            for a4 = s:s:s
                l1 = 0.1;
                l2 = 0.2;
                
                robot.l = [0.1,0.1,a3,0.1,...%1-4
                    0.1,0.1,a3,0.1,...%5-8
                    0.2,0.2,0.4 - a1,0.4- a1,...%9-12
                    0.05,0.05,0.05,0.05,...%13-16
                    l1,l1,l2,l2,...%17-20
                    l2,0.05,0.05,0.05,...%21-24
                    l2,0.05,0.05,0.05,...%25-28
                    l1,l1,l1,l1,...%29-32
                    0.1,0.1,0.1,0.1];%32-36
                
                k1  = 100;
                
                robot.k = [k1,k1,k1,k1,...%1-4
                    k1,k1,k1,k1,...%5-8
                    k1,k1,k1,k1,...%9-12
                    k1,k1,k1,k1,...%13-16
                    k1,k1,k1,k1,...%17-20
                    k1,k1,k1,k1,...%21-24
                    k1,k1,k1,k1,...%25-28
                    k1,k1,k1,k1,...%29-32
                    k1,k1,k1,k1];%33-36
                
                robot.x0 = [0,0,0.6,0,0.2,0,...
                    0.2,0,0.6,0,0.2,0,...
                    0,0.1,-0.1,0.2,0,0,...
                    0,0.1,0.4,0.2,0,0,...
                    0,0.1,0.8,1,0,0,...
                    0.1,0,-0.1,0,0,1,...
                    0.1,0.2,-0.1,0,0,1];
                
                d1 = 0.8;
                d2 = 0.4;
                robot.d = [0.2,0.2,d2,d2,d2,d2,d1,d1,d1];
                robot.m = [1,1,1,1,1,1,1,1,1]*0;
                robot.f = [0;0;10]*0;
                
                robot.end_eff.rod = 7;
                robot.end_eff.end = 1;
                
                robot.base = [0,0,0,...
              0,0.2,0,...
              0.2,0,0,...
              0.2,0.2,0];
                
                robot.energy_f = @energy_leg;
                
                [p,x] = forward_kin_tensegrity(robot);
                visualize(p,x,robot)
                drawnow
            end
        end
    end
end